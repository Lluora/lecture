```
í•´ë‹¹ ë‹µì•ˆì„ ë³´ê³  ë‚´ê°€ ì´í•´í•œ ë°”ë¡œ ì ì€ ê²ƒì´ë¼ ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.
ì£¼ì„ì— ë‚´ê°€ ì´í•´í•œ ë¶€ë¶„ì„ ì ì—ˆê³  ë”°ë¡œ ëŠë‚€ ë¶€ë¶„ë“¤ì„ ì ì—ˆë‹¤.
```

<br>

### db ì €ì¥  
<br>

***idx*** - ë²ˆí˜¸(ë°ì´í„°ì˜ ìœ ë‹ˆí¬í•œ ë²ˆí˜¸)      
***title*** - íƒ€ì´í‹€(ì œëª©)        
***content*** - ë‚´ìš©(ê°„ë‹¨í•œ ë‚´ìš©)       
***reg_date*** - ì €ì¥ ë°ì´íŠ¸ íƒ€ì„         

<br>

#### javascript
```javascript
        function postArticle() {
            let url = $("#post-url").val(); //ì œëª©
            let comment = $("#post-comment").val(); //ê°„ë‹¨í•œ ë‚´ìš© 

            // 2. memoì— POST ë°©ì‹ìœ¼ë¡œ ë©”ëª¨ ìƒì„± ìš”ì²­í•˜ê¸°
            $.ajax({
                type: "POST",
                url: "/post",
                data: {title: url, content: comment},
                success: function (response) { // ì„±ê³µí•˜ë©´
                    if (response["result"] == "success") {
                        alert("í¬ìŠ¤íŒ… ì„±ê³µ!");
                        // 3. ì„±ê³µ ì‹œ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨í•˜ê¸°
                        window.location.reload();
                    } else {
                        alert("ì„œë²„ ì˜¤ë¥˜!");
                    }
                }
            })
        }
```

<br>

#### python
```python
@app.route('/post', methods=['POST'])
def save_post():
    title = request.form.get('title')
    content = request.form.get('content')
    post_count = db.post.count()
    if post_count == 0: # ì €ì¥ëœ DBê°€ ì—†ìœ¼ë©´
        max_value = 1  # INDEX 1
    else:
        max_value = db.post.find_one(sort=[("idx", -1)])['idx'] + 1
        # ìµœê·¼ ë‚ ì§œ ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê³  ê°€ì¥ ë§ˆì§€ë§‰ INDEX ë²ˆí˜¸ì—ì„œ +1ë¡œ ì €ì¥í•˜ê¸°

    post = {
        'idx': max_value,
        'title': title,
        'content': content,
        'reg_date': datetime.now()
    }
    db.post.insert_one(post)
    return {"result": "success"}
```


<br>

DBì—ëŠ” ì €ì¥ì„ ì €ì¥í•œ ìˆœì„œëŒ€ë¡œ idxë¥¼ ì €ì¥í•œë‹¤. 

3ê°œ ë°ì´í„° ì €ì¥ | 4ê°œ ë°ì´í„° ì €ì¥ | 
|---|:---:|
<img src = https://user-images.githubusercontent.com/74857364/135761554-fdbf856d-0852-49e9-b710-d364622be3b7.png width="80%"> | <img src = https://user-images.githubusercontent.com/74857364/135761560-c7889c5c-f917-49c2-9014-3c1cd3a1261d.png width="70%"> |

<br>

---

### reg_date ì»¬ëŸ¼ì„ ì‚¬ìš©í•˜ì—¬ ìµœê·¼ì— ì‘ì„±í•œ ê¸€ì´ ìƒìœ„ì— ìœ„ì¹˜í•˜ë„ë¡ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬

<br>

#### python
```python
@app.route('/post', methods=['GET'])
def get_post():
    posts = list(db.post.find({}, {'_id': False}).sort([("reg_date", -1)])) # ì •ë ¬
    for a in posts:
        a['reg_date'] = a['reg_date'].strftime('%Y.%m.%d %H:%M:%S') #2021.10.03 23:00:00 í˜•ì‹ìœ¼ë¡œ ì¶œë ¥

    return jsonify({"posts": posts})
```

#### javascript
```javascript
        function showArticles() {
            $.ajax({
                type: "GET",
                url: "/post",
                data: {},
                success: function (response) {
                    let posts = response["posts"];
                    for (let i = 0; i < posts.length; i++) {
                        makeListPost(posts[i], i);
                    }
                }
            })
        }


        function makeListPost(post, index) { // í™”ë©´ ë„ìš°ê¸°
            let tempHtml = ` <tr>
                      <th scope="row">${index + 1}</th>
                      <td>${post['title']}</td>
                      <td>${post['reg_date']}</button></td>
                      <td><button type="button" class="btn btn-danger" onclick="deleteArticle(${post['idx']})">ì‚­ì œ</button></td>
                      </tr>
                    `;
            $("#list-post").append(tempHtml);
        }
```

<br>

dbì—ëŠ” ***idx***ë¥¼ 1ì”© ì¦ê°€í•˜ë©´ì„œ ë„£ê³  í‘œì—ëŠ” ***index***ë¥¼ ìƒˆë¡œ ìƒì„±í•´ì„œ ë¸Œë¼ìš°ì €ì— ë„ìš°ê³  ì‚­ì œë¥¼ í•  ë•ŒëŠ” ***idx***ë¥¼ ì´ìš©í•´ì„œ ì‚­ì œë¥¼ í–ˆë‹¤.

ë‚˜ëŠ” dbì— **idx**ë¥¼ ì €ì¥í•´ì„œ **idx**ë§Œ ë¸Œë¼ìš°ì €ì— ìµœì‹  ìˆœìœ¼ë¡œ í‘œì— ë„ìš°ê³  ê·¸ **idx**ë¥¼ ì´ìš©í•´ì„œ ì‚­ì œí•˜ëŠ” ì¤„ë¡œ ìƒê°í•´ì„œ 

ì–´ë–»ê²Œ êµ¬í˜„í• ì§€ ëª°ëëŠ”ë° ì˜ëª»ìƒê°í•œ ê²ƒì´ì—ˆë‹¤.ğŸ˜…


---

### ë°ì´í„°ì˜ ìœ ë‹ˆí¬í•œ ë²ˆí˜¸ì¸ idx ì»¬ëŸ¼ì„ ì‚¬ìš©í•˜ì—¬ ì‚­ì œ

<br>

#### python
```python
@app.route('/post', methods=['DELETE'])
def delete_post():
    idx = request.args.get('idx')
    db.post.delete_one({'idx': int(idx)})
    return {"result": "success"}
```
<br>

#### javascript
```javascript
        function deleteArticle(idx) {
            $.ajax({
                type: "DELETE",
                url: `/post?idx=${idx}`,
                success: function (response) { // ì„±ê³µí•˜ë©´
                    if (response["result"] == "success") {
                        alert("ì‚­ì œ ì„±ê³µ!");
                        // 3. ì„±ê³µ ì‹œ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨í•˜ê¸°
                        window.location.reload();
                    } else {
                        alert("ì„œë²„ ì˜¤ë¥˜!");
                    }
                }
            })
        }
```
